<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    

    <script>

       
        const dcFetch = (url) => { 
            
            let promise = new Promise((resolve, reject) => { 
                
                let xhr = new XMLHttpRequest(); 

                xhr.open('GET', url)

                xhr.send()

                xhr.onreadystatechange = () => { 
                    
                    if(xhr.readyState == 4 && xhr.status == 200){

                        let data = JSON.parse(xhr.responseText)

                        resolve(data)
                    }
                    else if (xhr.readyState == 4 && xhr.status !== 200){

                        reject('erro in data')
                    }
                 }

                 
            })//end of the promise

            return promise
        }

        window.dcFetch = dcFetch 


        
        /// 

        dcFetch('https://jsonplaceholder.typicode.com/posts')
        .then(data=>{

            console.log(data)
        })
        .catch(err=>{
            console.log(err)
        })



    </script>
</body>
</html>